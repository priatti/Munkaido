const translations = {
    hu: {
        // √Åltal√°nos
        appTitle: "Munkaid≈ë Nyilv√°ntart√≥ Pro",
        delete: "T√∂rl√©s",
        ok: "Rendben",
        cancel: "M√©gse",
        save: "Ment√©s",
        cityPlaceholder: "V√°ros",
        fromPlaceholder: "Honnan",
        toPlaceholder: "Hova",
        // F√ºlek √©s men√º
        tabOverview: "√Åttekint√©s",
        tabFullDay: "Teljes nap",
        tabStart: "Ind√≠t√°s",
        tabList: "Lista",
        menuListDesc: "Mentett munkanapok",
        tabPallets: "Raklap",
        menuPalletsDesc: "Raklap egyenleg kezel√©se",
        menuMore: "Tov√°bbiak",
        menuSummary: "√ñsszes√≠t≈ë",
        menuSummaryDesc: "Napi, heti √©s havi adatok",
        menuStats: "Statisztika",
        menuStatsDesc: "R√©szletes, lapozhat√≥ diagramok",
        menuTachograph: "Tachogr√°f",
        menuTachographDesc: "Vezet√©si √©s pihen≈ëid≈ë elemz√©s",
        menuReport: "Riport",
        menuReportDesc: "Nyomtathat√≥ havi elsz√°mol√°s",
        menuSettings: "Be√°ll√≠t√°sok",
        menuSettingsDesc: "Adatment√©s √©s szem√©lyes adatok",
        menuHelp: "S√∫g√≥",
        menuHelpDesc: "Haszn√°lati √∫tmutat√≥ √©s tippek",
        // Live n√©zet
        liveOverviewTitle: "√Åttekint√©s",
        liveNewDayTitle: "√öj munkanap ind√≠t√°sa",
        date: "D√°tum",
        time: "Id≈ë",
        location: "Hely",
        weeklyDrive: "Heti vezet√©s",
        startKm: "Kezd≈ë km",
        startWorkday: "Munkanap ind√≠t√°s",
        workdayInProgress: "Munkanap folyamatban",
        startedAt: "Elkezdve",
        newBorderCrossing: "√öj Hat√°r√°tl√©p√©s",
        getCountryCodeGPS: "Orsz√°gk√≥d lek√©r√©se GPS alapj√°n",
        addBorderCrossing: "Hat√°r√°tl√©p√©s hozz√°ad√°sa",
        finishShift: "M≈±szak Befejez√©se",
        discardWorkday: "Munkanap elvet√©se",
        recordedCrossings: "R√∂gz√≠tett √°tl√©p√©sek:",
        dashboardDriveThisWeek: "Vezet√©s ezen a h√©ten",
        dashboardWorkThisWeek: "Munkaid≈ë ezen a h√©ten",
        dashboardDistanceThisMonth: "T√°vols√°g ebben a h√≥napban",
        dashboardDistanceLastWeek: "M√∫lt heti t√°vols√°g",
        liveShiftDetailsTitle: "M≈±szak adatai",
        liveStartLocationLabel: "Kezd≈ë hely:",
        liveStartDriveLabel: "Kezd≈ë vezet√©s:",
        liveStartKmLabel: "Kezd≈ë km:",
        // Teljes nap n√©zet
        fullDayTitle: "Teljes munkanap r√∂gz√≠t√©se",
        dateLabelFull: "D√°tum (a munka befejez√©s√©nek napja)",
        workTimeAndLocation: "Munkaid≈ë √©s Helysz√≠n",
        startTime: "Kezd√©s ideje",
        endTime: "Befejez√©s ideje",
        compensationLabel: "Kompenz√°ci√≥ / Sz√ºnet (levon√≥dik)",
        startLocation: "Kezd√©s helye",
        endLocation: "Befejez√©s helye",
        getLocationGPS: "Helysz√≠n lek√©r√©se GPS alapj√°n",
        borderCrossings: "Hat√°r√°tl√©p√©sek",
        addCrossing: "√öj √°tl√©p√©s hozz√°ad√°sa",
        weeklyDriveTimeHours: "Heti vezet√©si id≈ë (√≥ra)",
        atDayStart: "Nap elej√©n (√≥√≥:pp)",
        atDayEnd: "Nap v√©g√©n (√≥√≥:pp)",
        kmReading: "Kilom√©ter √°ll√°s",
        endKm: "Z√°r√≥ km",
        splitRestQuestion: "Volt 3+ √≥r√°s egybef√ºgg≈ë pihen≈ë? (Osztott)",
        saveEntry: "Bejegyz√©s Ment√©se",
        workTimeDisplay: "Munkaid≈ë",
        nightWorkDisplay: "√âjszakai (20:00-05:00)",
        driveTimeTodayDisplay: "Mai vezet√©si id≈ë",
        kmDrivenDisplay: "Megtett km",
        // Lista n√©zet
        listTitle: "Bejegyz√©sek",
        noEntries: "M√©g nincsenek bejegyz√©sek",
        entryDeparture: "Indul√°s",
        entryArrival: "√ârkez√©s",
        entryWorkTime: "Munkaid≈ë",
        entryCompensation: "Kompenz√°ci√≥",
        entryNightTime: "√âjszakai",
        entryDriveTime: "Vezet√©s",
        entryDistance: "T√°vols√°g",
        entryCrossingsLabel: "Hat√°r√°tl√©p√©sek",
        // √ñsszes√≠t≈ë n√©zet
        summaryTitle: "√ñsszes√≠t√©sek",
        summaryToday: "Ma",
        summaryYesterday: "Tegnap",
        summaryThisWeek: "Aktu√°lis h√©t",
        summaryLastWeek: "M√∫lt h√©t",
        summaryThisMonth: "Aktu√°lis h√≥nap",
        summaryLastMonth: "El≈ëz≈ë h√≥nap",
        summaryDays: "nap",
        summaryWork: "Munka",
        summaryNight: "√âjszakai",
        summaryDrive: "Vezet√©s",
        summaryDistance: "T√°v",
        summaryNoData: "Nincs adat",
        // Statisztika n√©zet
        statsTitle: "R√©szletes Statisztik√°k",
        statsDaily: "Napi",
        statsMonthly: "Havi",
        statsYearly: "√âves",
        statsWorkTime: "Munkaid≈ë",
        statsDriveTime: "Vezet√©si id≈ë",
        statsNightTime: "√âjszakai munka",
        statsKmDriven: "Megtett kilom√©ter",
        statsNoDataPeriod: "Nincs adat a kiv√°lasztott id≈ëszakban.",
        chartMonths: ['Jan', 'Feb', 'M√°r', '√Åpr', 'M√°j', 'J√∫n', 'J√∫l', 'Aug', 'Szep', 'Okt', 'Nov', 'Dec'],
        // Riport n√©zet
        reportTitle: "Havi riport",
        reportMonthSelect: "H√≥nap kiv√°laszt√°sa",
        reportGenerate: "Riport gener√°l√°sa",
        reportDownloadPDF: "PDF let√∂lt√©s",
        reportSharePDF: "PDF megoszt√°sa",
        reportPrepared: "Riport el≈ëk√©sz√≠tve.",
        palletReportGenerate: "Raklap riport gener√°l√°sa",
        // Be√°ll√≠t√°sok
        settingsTitle: "Be√°ll√≠t√°sok √©s Adatkezel√©s",
        settingsSyncTitle: "Felh≈ë Szinkroniz√°ci√≥",
        settingsSyncDesc: "Jelentkezz be a Google fi√≥koddal, hogy az adataidat a felh≈ëbe mentsd √©s t√∂bb eszk√∂z√∂n is el√©rd.",
        settingsLoginGoogle: "Bejelentkez√©s Google-fi√≥kkal",
        settingsLoggedInAs: "Bejelentkezve mint:",
        settingsLogout: "Kijelentkez√©s",
        settingsPersonalData: "Szem√©lyes adatok",
        settingsNameForReports: "N√©v (riportokhoz)",
        settingsNamePlaceholder: "Vezet√©kn√©v Keresztn√©v",
        settingsSaveData: "Adatok ment√©se",
        settingsAppearance: "Megjelen√©s",
        settingsLanguage: "Nyelv",
        settingsThemeSelect: "V√°lassz t√©m√°t",
        settingsTheme: "T√©ma",
        settingsThemeAuto: "Automatikus",
        settingsThemeLight: "Nappali",
        settingsThemeDark: "√âjszakai",
        settingsSpecialFunctions: "Speci√°lis funkci√≥k",
        settingsFeatureKm: "Kilom√©ter Nyilv√°ntart√°s",
        settingsFeatureDriveTime: "Vezet√©si Id≈ë Nyilv√°ntart√°s",
        settingsFeaturePallets: "Raklap Nyilv√°ntart√°s",
        settingsFeatureCompensation: "Sz√ºnet/Kompenz√°ci√≥ Levon√°sa",
        settingsExportTitle: "Adatok export√°l√°sa (Backup)",
        settingsExportDesc: "Mentsd le az √∂sszes bejegyz√©sedet egy JSON f√°jlba.",
        settingsAutoExportFreq: "Automatikus ment√©s gyakoris√°ga:",
        settingsFreqNever: "Soha",
        settingsFreqDaily: "Naponta",
        settingsFreqWeekly: "Hetente",
        settingsFreqMonthly: "Havonta",
        settingsAutoExportDesc: "Az alkalmaz√°s ind√≠t√°sakor ellen≈ërzi, hogy esed√©kes-e a ment√©s.",
        settingsDownloadData: "Adatok let√∂lt√©se",
        settingsImportTitle: "Adatok import√°l√°sa",
        settingsImportDesc: "T√∂lts vissza egy kor√°bban lementett adatf√°jlt. Figyelem: ez fel√ºl√≠rja a jelenlegi adatokat!",
        settingsUploadData: "Adatok vissz√∂lt√©se",
        settingsAboutCreator: "K√©sz√≠tette: Princz Attila",
        slogan: "Egy kamionos, aki appot k√©sz√≠t.",
        settingsVersion: "Verzi√≥:",
        settingsInstallAppTitle: "Alkalmaz√°s Telep√≠t√©se",
        settingsInstallAppDesc: "Telep√≠tse az alkalmaz√°st a kezd≈ëk√©perny≈ëj√©re a gyorsabb el√©r√©s √©s az offline haszn√°lat √©rdek√©ben.",
        settingsInstallButton: "Telep√≠t√©s",
        developerIntroTitle: "Egy sof≈ërt≈ël a t√∂bbi sof≈ërnek",
        developerIntroBody: "Szia! Princz Attila vagyok, √©s hozz√°d hasonl√≥an √©n is kamionsof≈ërk√©nt dolgozom.<br><br>√âvekig haszn√°ltam a f√ºzetet √©s k√ºl√∂nf√©le, nem igaz√°n felhaszn√°l√≥bar√°t alkalmaz√°sokat a munkaid≈ëm √©s a raklapjaim k√∂vet√©s√©re. Tudtam, hogy l√©tezik egy egyszer≈±bb, gyorsabb √©s megb√≠zhat√≥bb m√≥dszer.<br><br>Ez√©rt hoztam l√©tre a Munkaid≈ë Nyilv√°ntart√≥ Pro-t: egy olyan eszk√∂zt, ami a val√≥s, mindennapi probl√©m√°inkra ny√∫jt megold√°st, felesleges bonyol√≠t√°sok n√©lk√ºl. Minden funkci√≥t ‚Äì a h√©tv√©gi √°tfordul√≥ m≈±szak kezel√©s√©t≈ël a tachogr√°f-elemz≈ëig ‚Äì a saj√°t √©s a koll√©g√°im tapasztalatai alapj√°n fejlesztettem.<br><br>Rem√©lem, neked is annyi id≈ët √©s fejf√°j√°st sp√≥rol meg, mint nekem.<br><br>Biztons√°gos utat!",
        // Tachogr√°f
        tachoTitle: "Tachogr√°f Elemz√©s",
        tachoAllowanceDrive10h: "Fennmarad√≥ 10 √≥r√°s vezet√©s",
        tachoAllowanceReducedRest: "Fennmarad√≥ cs√∂kk. pihen≈ë",
        tachoCompensation: "Kompenz√°ci√≥",
        tachoWeeklyRest: "Heti pihen≈ë",
        tachoReducedWeeklyRest: "Cs√∂kkentett heti pihen≈ë",
        tachoLongRest: "Hossz√∫ pihen≈ë",
        tachoIrregularRest: "Szab√°lytalan pihen≈ë",
        tachoSplitRest: "Osztott pihen≈ë",
        tachoRegularDailyRest: "Rendes napi pihen≈ë",
        tachoReducedDailyRest: "cs√∂kkentett napi pihen≈ë",
        tachoReason13h: "(13√≥+ munka miatt)",
        tachoIrregularDrive: "Szab√°lytalan vezet√©s",
        tachoIncreasedDrive: "megn√∂velt vezet√©s",
        tachoNormalDrive: "Norm√°l napi vezet√©s",
        tachoRestBeforeShift: "M≈±szak el≈ëtti pihen≈ë",
        tachoDailyDriveTime: "Napi vezet√©si id≈ë",
        tachoNoDriveTime: "Nincs vezet√©s r√∂gz√≠tve",
        tachoInProgress: "Folyamatban...",
        earliestStartTitle: "Legkor√°bbi indul√°s",
        latestRestStartTitle: "Legk√©s≈ëbbi pihen≈ë kezd√©s",
        with9hRest: "9 √≥r√°s pihen≈ëvel",
        with11hRest: "11 √≥r√°s pihen≈ëvel",
        reducedLabel: "(cs√∂kkentett):",
        regularLabel: "(rendes):",
        with11hRestLatest: "11 √≥r√°s pihen≈ëh√∂z (rendes):",
        with9hRestLatest: "9 √≥r√°s pihen≈ëh√∂z (cs√∂kkentett):",
        noMoreReducedRests: "Nincs t√∂bb cs√∂kkentett pihen≈ëd.",
        noMoreReducedRestsWarning: "Nincs t√∂bb cs√∂kkentett pihen≈ëd ebben a ciklusban!",
        earliestStartWarning: "Figyelem: A kalkul√°ci√≥ a napi pihen≈ëid≈ëvel sz√°mol, a heti pihen≈ëid≈ët nem veszi figyelembe.",
        tachoDevWarning: "A tachogr√°f funkci√≥k k√≠s√©rleti f√°zisban vannak. Ha hib√°t tal√°lsz, k√©rlek jelezd!",
        // Raklapok
        palletsTitle: "Paletta Nyilv√°ntart√°s",
        palletsBalance: "Aktu√°lis egyenleg:",
        palletsNewTransaction: "√öj tranzakci√≥",
        palletsLocationPlaceholder: "V√°ros, c√©g...",
        palletsLicensePlate: "Rendsz√°m (opcion√°lis)",
        palletsLicensePlatePlaceholder: "Pl. ABC-123",
        palletsLicensePlateLabel: "Rendsz√°m",
        palletsSaveTransaction: "Tranzakci√≥ ment√©se",
        palletsHistory: "El≈ëzm√©nyek",
        palletsNoTransactions: "M√©g nincsenek paletta tranzakci√≥k r√∂gz√≠tve.",
        palletsGivenLabel: "Leadott üöõ‚û°Ô∏è",
        palletsTakenLabel: "Felvett üöõ‚¨ÖÔ∏è",
        palletsTypeLabel: "T√≠pus / Megjegyz√©s",
        palletsTypePlaceholder: "Pl. EUR, DD, CHEP...",
        pallets1to1Button: "1:1",
        palletReportHeaderDate: "D√°tum",
        palletReportHeaderLocation: "Helysz√≠n",
        palletReportHeaderGiven: "Leadott",
        palletReportHeaderTaken: "Felvett",
        palletReportHeaderType: "T√≠pus",
        palletReportHeaderPlate: "Rendsz√°m",
        palletReportHeaderBalance: "Egyenleg",
        palletReportFileName: "Raklap_Riport",
        palletReportTitle: "Raklapmozg√°s Riport",
        palletSettingsTitle: "üì¶ Raklap Be√°ll√≠t√°sok",
        // Raklap be√°ll√≠t√°sok
        toggleMultiPallet: "T√∂bb raklapt√≠pus kezel√©se",
        multiPalletDesc: "Kapcsold be, ha az EUR mellett m√°s t√≠pusokat is szeretn√©l nyilv√°ntartani (pl. DD, CHEP).",
        addPalletType: "Hozz√°ad√°s",
        newPalletTypeLabel: "Egyedi raklapt√≠pusok",
        newPalletTypePlaceholder: "Pl. DD, CHEP...",
        palletTypeName: "T√≠pusn√©v",
        deletePalletTypeConfirm: "Biztosan t√∂r√∂lni szeretn√©d a(z) \"{type}\" t√≠pust?",
        palletTypeExists: "Ez a t√≠pus m√°r l√©tezik!",
        palletTypeNameEmpty: "A t√≠pusn√©v nem lehet √ºres!",
        // √úzenetek
        alertShareInAppBrowser: "A megoszt√°s Messenger/Facebook b√∂ng√©sz≈ëben nem t√°mogatott. A sikeres megoszt√°shoz, k√©rlek, nyisd meg a linket a telefonod rendes b√∂ng√©sz≈ëj√©ben (pl. Chrome, Safari)!",
        alertConfirmReducedRest: "Figyelem: a pihen≈ëid≈ëd kevesebb, mint 11 √≥ra volt. Ez cs√∂kkentett napi pihen≈ënek sz√°m√≠t, √©s fel fog haszn√°lni egyet a heti 3 keretb≈ël. Biztosan elind√≠tod a m≈±szakot?",
        alertRolloverTitle: "√Åth√∫z√≥d√≥ m≈±szak",
        alertRolloverPrompt: "√âszlelt√ºk, hogy a m≈±szakod a h√©tv√©g√©n √°th√∫z√≥dott (vas√°rnapi indul√°s, h√©tf≈ëi √©rkez√©s). K√©rj√ºk, add meg a m≈±szak <strong>teljes vezet√©si idej√©t</strong> a tachogr√°f alapj√°n:",
        alertRolloverPlaceholder: "Vezet√©si id≈ë (√≥√≥:pp)",
        alertLoginError: "Bejelentkez√©si hiba t√∂rt√©nt.",
        alertPopupClosed: "A bejelentkez√©si ablakot bez√°rta.",
        alertPopupBlocked: "A b√∂ng√©sz≈ë blokkolta a felugr√≥ ablakot. K√©rj√ºk, enged√©lyezze.",
        alertDataLoadError: "Hiba az adatok let√∂lt√©sekor.",
        alertSaveToCloudError: "Hiba a felh≈ëbe ment√©skor.",
        alertMandatoryFields: "A d√°tum √©s a munkaid≈ë megad√°sa k√∂telez≈ë!",
        alertKmEndLower: "Hiba: A z√°r√≥ kilom√©ter nem lehet kevesebb, mint a kezd≈ë!",
        alertWeeklyDriveEndLower: "Hiba: A heti vezet√©si id≈ë a nap v√©g√©n nem lehet kevesebb, mint a nap elej√©n!",
        alertConfirmZeroValues: "A vezet√©si id≈ë vagy a megtett kilom√©ter 0. Biztosan √≠gy szeretn√©d menteni?",
        alertSaveSuccess: "Bejegyz√©s sikeresen mentve!",
        alertGeolocationNotSupported: "A b√∂ng√©sz≈ëd nem t√°mogatja a helymeghat√°roz√°st.",
        alertConfirmDelete: "Biztosan t√∂r√∂lni szeretn√©d?",
        alertFillAllFields: "K√©rlek t√∂lts ki minden mez≈ët!",
        alertNoDataToExport: "Nincsenek adatok az export√°l√°shoz!",
        alertChooseFile: "K√©rlek v√°lassz egy f√°jlt!",
        alertConfirmImport: "Biztosan import√°lod? A jelenlegi adatok fel√ºl√≠r√≥dnak!",
        alertImportSuccess: "Adatok sikeresen import√°lva!",
        alertImportInvalid: "√ârv√©nytelen f√°jlform√°tum.",
        alertLocationFailed: "Helysz√≠n lek√©r√©se sikertelen.",
        alertShareNotSupported: "A b√∂ng√©sz≈ëd nem t√°mogatja ezt a funkci√≥t.",
        alertGenerateReportFirst: "El≈ësz√∂r gener√°lj riportot a megoszt√°shoz!",
        alertReportNameMissing: "A riport gener√°l√°s√°hoz k√©rlek, add meg a nevedet a Be√°ll√≠t√°sok men√ºben!",
        palletSaveSuccess: "Tranzakci√≥ mentve!",
        palletInvalidData: "K√©rlek add meg a helysz√≠nt √©s legal√°bb az egyik mennyis√©get!",
        alertNoPalletData: "Nincs raklapmozg√°s, amib≈ël riportot lehetne k√©sz√≠teni.",
        autoBackupOn: "Automatikus ment√©s bekapcsolva!",
        autoBackupOff: "Automatikus ment√©s kikapcsolva.",
        settingsSaved: "Be√°ll√≠t√°sok mentve!",
        logRecalculatingNightWork: '√âjszakai id≈ëk √∫jrasz√°m√≠t√°sa a 20:00-05:00 szab√°ly szerint...',
        logEntriesUpdated: 'bejegyz√©s friss√≠tve.',
        logAutoExportStarted: 'Automatikus ment√©s elind√≠tva...',
        errorPdfGeneration: 'Hiba t√∂rt√©nt a PDF gener√°l√°sa k√∂zben:',
        errorSharing: 'Hiba a megoszt√°s sor√°n:',
        shareAborted: 'Megoszt√°s megszak√≠tva.',
        errorImport: 'Hiba:',
        shareErrorCannotShare: 'Ezt a f√°jlt nem lehet megosztani.',
        // S√∫g√≥
        helpTitle: "S√∫g√≥ √©s Gyakori K√©rd√©sek",
        // ... (a t√∂bbi s√∫g√≥ sz√∂veg)
    },
    de: {
        // ... (a t√∂bbi n√©met ford√≠t√°s)
        // Meldungen
        alertShareInAppBrowser: "Das Teilen wird im Messenger/Facebook-Browser nicht unterst√ºtzt. F√ºr ein erfolgreiches Teilen √∂ffnen Sie den Link bitte im normalen Browser Ihres Telefons (z.B. Chrome, Safari)!",
        alertConfirmReducedRest: "Achtung: Ihre Ruhezeit betrug weniger als 11 Stunden. Dies z√§hlt als reduzierte t√§gliche Ruhezeit und verbraucht eine Ihrer 3 w√∂chentlichen Gelegenheiten. M√∂chten Sie die Schicht wirklich starten?",
        alertRolloverTitle: "Schicht √ºber das Wochenende",
        // ... (a t√∂bbi n√©met √ºzenet)
    }
};

let currentLang = localStorage.getItem('language') || (navigator.language.startsWith('de') ? 'de' : 'hu');

function setLanguage(lang) {
    if (['hu', 'de'].includes(lang)) {
        currentLang = lang;
        localStorage.setItem('language', lang);
        document.documentElement.lang = lang;
        updateAllTexts();
    }
}

function updateAllTexts() {
    const i18n = translations[currentLang];
    document.querySelectorAll('[data-translate-key]').forEach(el => {
        const key = el.dataset.translateKey;
        const translation = i18n[key];
        
        if (translation !== undefined) {
            if (el.placeholder) {
                el.placeholder = translation;
            } else if (el.title && (el.tagName === 'BUTTON' || el.tagName === 'A')) {
                el.title = translation;
            } else {
                el.innerHTML = translation;
            }
        }
    });

    document.title = i18n.appTitle;
    updateLanguageButtonStyles();
    
    const compensationSectionDe = document.getElementById('compensation-section-de');
    if(compensationSectionDe) {
        compensationSectionDe.style.display = currentLang === 'de' ? 'none' : 'block';
    }
    const compensationToggle = document.getElementById('toggleCompensation');
    if(compensationToggle && compensationToggle.parentElement && compensationToggle.parentElement.parentElement) {
        const compCard = compensationToggle.closest('.enhanced-toggle-container'); if (compCard) { compCard.style.display = currentLang === 'de' ? 'none' : 'flex'; }
    }
}

function updateLanguageButtonStyles() {
    const selector = document.getElementById('languageSelector');
    if (selector) {
        const buttons = selector.querySelectorAll('button');
        buttons.forEach(btn => {
            btn.classList.remove('bg-blue-100', 'border-blue-500', 'font-bold');
            if ((currentLang === 'hu' && btn.innerText.includes('Magyar')) || (currentLang === 'de' && btn.innerText.includes('Deutsch'))) {
                btn.classList.add('bg-blue-100', 'border-blue-500', 'font-bold');
            }
        });
    }
}